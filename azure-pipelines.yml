trigger:
- none

pool:
  vmImage: 'ubuntu-latest'

stages:
- stage: Plan
  displayName: 'Terraform Plan'
  jobs:
  - job: TerraformPlan
    displayName: 'Terraform Plan'
    steps:
    - task: TerraformInstaller@0
      inputs:
        terraformVersion: 'latest'

    - task: Bash@3
      inputs:
        targetType: 'inline'
        script: |
          az login --service-principal --username 6ae75f68-d956-4829-a902-1e86d1998201 --password vei8Q~tStpzTRKzDr2sPpAFUciprZJjWtvmvha_I --tenant 8e2dc2c8-cb38-4b25-91cf-cca92778bd6a
          terraform --version
          terraform init
          terraform plan